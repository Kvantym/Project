@model IEnumerable<Project.Models.Movie>

@{
    ViewData["Title"] = "Список фільмів";
}

<h2>Список фільмів</h2>

<div class="movies-container" style="display:flex; flex-wrap: wrap; gap: 20px;">
    @foreach (var movie in Model)
    {
        string? imageBase64 = null;
        if (movie.ImageData != null && movie.ImageMimeType != null)
        {
            imageBase64 = $"data:{movie.ImageMimeType};base64,{Convert.ToBase64String(movie.ImageData)}";
        }

        <div class="movie-card" style="border: 1px solid #ccc; padding: 15px; width: 300px; box-shadow: 2px 2px 5px rgba(0,0,0,0.1); border-radius: 8px;">
            @if (imageBase64 != null)
            {
                <img src="@imageBase64" alt="@movie.Title" style="width: 100%; height: 180px; object-fit: cover; border-radius: 5px;" />
            }
            else
            {
                <div style="width:100%; height:180px; background:#ddd; display:flex; align-items:center; justify-content:center; color:#666; border-radius:5px;">
                    Немає зображення
                </div>
            }

            <h3>@movie.Title (@movie.Year)</h3>
            <p><strong>Автор:</strong> @movie.Autor</p>
            <p><strong>Жанр:</strong> @movie.Genre</p>
            <p><strong>Рейтинг:</strong> @movie.Rating</p>
            <p><strong>Опис:</strong> @movie.Description</p>

            <div style="display:flex; justify-content: space-between; margin-top: 10px;">
                <form method="get" asp-action="EditMoviePage" asp-controller="Movie" asp-route-id="@movie.Id" style="margin:0;">
                    <button type="submit" class="btn btn-primary" style="padding: 6px 12px; background-color:#007bff; color:#fff; border:none; border-radius:4px; cursor:pointer;">
                        Редагувати
                    </button>
                </form>


                <form method="post" asp-action="DeleteMovie" asp-controller="Movie" asp-route-id="@movie.Id" onsubmit="return confirm('Ви впевнені, що хочете видалити цей фільм?');" style="margin:0;">
                    <button type="submit" class="btn btn-danger" style="padding: 6px 12px; background-color:#dc3545; color:#fff; border:none; border-radius:4px; cursor:pointer;">
                        Видалити
                    </button>
                </form>
            </div>
        </div>
    }
</div>
